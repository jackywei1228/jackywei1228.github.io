<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>多次拨打电话并且挂断之后.会在某一次拨号界面会冻住</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/shou-ji-gua-duan-bu-liao-dian-hua/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/shou-ji-gua-duan-bu-liao-dian-hua/</url>
      
        <content type="html"><![CDATA[<h1 id="多次拨打电话并且挂断之后-会在某一次拨号界面会冻住"><a href="#多次拨打电话并且挂断之后-会在某一次拨号界面会冻住" class="headerlink" title="多次拨打电话并且挂断之后.会在某一次拨号界面会冻住."></a>多次拨打电话并且挂断之后.会在某一次拨号界面会冻住.</h1><h1 id="分析过程"><a href="#分析过程" class="headerlink" title="分析过程"></a>分析过程</h1><p>出问题的</p><h2 id="有很多pending-async-transaction未返回"><a href="#有很多pending-async-transaction未返回" class="headerlink" title="有很多pending async transaction未返回."></a>有很多pending async transaction未返回.</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">binder proc state:</span><br><span class="line">proc 3419</span><br><span class="line">context hwbinder</span><br><span class="line">  thread 760: l 00 need_return 0 tr 0</span><br><span class="line">  thread 1655: l 00 need_return 0 tr 0</span><br><span class="line">  thread 2858: l 00 need_return 0 tr 0</span><br><span class="line">  thread 3419: l 00 need_return 0 tr 0</span><br><span class="line">  thread 3442: l 00 need_return 0 tr 0</span><br><span class="line">  thread 3453: l 00 need_return 0 tr 0</span><br><span class="line">  thread 3512: l 02 need_return 0 tr 0</span><br><span class="line">  thread 3586: l 00 need_return 0 tr 0</span><br><span class="line">  thread 3597: l 00 need_return 0 tr 0</span><br><span class="line">  thread 3600: l 00 need_return 0 tr 0</span><br><span class="line">  thread 4031: l 00 need_return 0 tr 0</span><br><span class="line">  node 123985: u0000000097ea23c0 c0000000097e9d8f0 pri 0:120 hs 0 hw 1 ls 0 lw 0 is 0 iw 1 tr 1 proc 251</span><br><span class="line">  node 138919: u0000000097ea2c60 c0000000097e9e750 pri 0:120 hs 0 hw 1 ls 0 lw 0 is 0 iw 1 tr 1 proc 251</span><br><span class="line">  node 15269: u00000000a64e9a40 c00000000a6712660 pri 0:120 hs 1 hw 1 ls 8 lw 0 is 1 iw 1 tr 1 proc 431</span><br><span class="line">    pending async transaction 149963: e6fb8c80 from 0:0 to 3419:0 code 63 flags 11 pri 0:120 r0 node 15269 size 452:68 data f6a004d4</span><br><span class="line">    pending async transaction 150734: c621e200 from 0:0 to 3419:0 code 37 flags 11 pri 0:120 r0 node 15269 size 68:4 data f6a008b8</span><br><span class="line">    pending async transaction 162914: e96bc400 from 0:0 to 3419:0 code 7b flags 11 pri 0:120 r0 node 15269 size 92:8 data f6a040e4</span><br><span class="line">    pending async transaction 164153: dc771b80 from 0:0 to 3419:0 code 7b flags 11 pri 0:120 r0 node 15269 size 92:8 data f6a04b3c</span><br><span class="line">    pending async transaction 166022: ce803000 from 0:0 to 3419:0 code 7b flags 11 pri 0:120 r0 node 15269 size 92:8 data f6a05884</span><br><span class="line">    pending async transaction 168226: d996c600 from 0:0 to 3419:0 code 7b flags 11 pri 0:120 r0 node 15269 size 92:8 data f6a06afc</span><br><span class="line">    pending async transaction 168903: dfc07200 from 0:0 to 3419:0 code 7b flags 11 pri 0:120 r0 node 15269 size 92:8 data f6a07610</span><br><span class="line">  node 15271: u00000000a64e9a60 c00000000a67126a0 pri 0:120 hs 1 hw 1 ls 55 lw 0 is 1 iw 1 tr 1 proc 431</span><br><span class="line">    pending async transaction 148293: eac90a80 from 0:0 to 3419:0 code 9 flags 11 pri 0:120 r0 node 15271 size 76:4 data f6a00418</span><br><span class="line">    pending async transaction 154669: d2824780 from 0:0 to 3419:0 code 9 flags 11 pri 0:120 r0 node 15271 size 76:4 data f6a03580</span><br><span class="line">    pending async transaction 155165: ce943e00 from 0:0 to 3419:0 code 9 flags 11 pri 0:120 r0 node 15271 size 76:4 data f6a0363c</span><br><span class="line">    pending async transaction 159800: ec976600 from 0:0 to 3419:0 code 9 flags 11 pri 0:120 r0 node 15271 size 76:4 data f6a038a8</span><br><span class="line">    pending async transaction 160862: ce943300 from 0:0 to 3419:0 code a flags 11 pri 0:120 r0 node 15271 size 244:32 data f6a039d0</span><br><span class="line">    pending async transaction 162027: c6249780 from 0:0 to 3419:0 code 9 flags 11 pri 0:120 r0 node 15271 size 76:4 data f6a03cd4</span><br><span class="line">    pending async transaction 162517: ec2b6c80 from 0:0 to 3419:0 code a flags 11 pri 0:120 r0 node 15271 size 244:32 data f6a03d90</span><br><span class="line">    pending async transaction 162713: d7bae800 from 0:0 to 3419:0 code 9 flags 11 pri 0:120 r0 node 15271 size 76:4 data f6a04028</span><br><span class="line">    pending async transaction 162915: c3dfa980 from 0:0 to 3419:0 code a flags 11 pri 0:120 r0 node 15271 size 244:32 data f6a041a4</span><br><span class="line">    pending async transaction 162997: ec2b6400 from 0:0 to 3419:0 code 9 flags 11 pri 0:120 r0 node 15271 size 76:4 data f6a0443c</span><br><span class="line">    pending async transaction 163477: cea1c680 from 0:0 to 3419:0 code 9 flags 11 pri 0:120 r0 node 15271 size 76:4 data f6a044f8</span><br><span class="line">    pending async transaction 163528: dfc07900 from 0:0 to 3419:0 code 9 flags 11 pri 0:120 r0 node 15271 size 76:4 data f6a045b4</span><br><span class="line">    pending async transaction 163529: d086a080 from 0:0 to 3419:0 code a flags 11 pri 0:120 r0 node 15271 size 244:32 data f6a04670</span><br><span class="line">    pending async transaction 163571: d527dd80 from 0:0 to 3419:0 code 9 flags 11 pri 0:120 r0 node 15271 size 76:4 data f6a04908</span><br><span class="line">    pending async transaction 163931: e96bc780 from 0:0 to 3419:0 code 9 flags 11 pri 0:120 r0 node 15271 size 76:4 data f6a049c4</span><br><span class="line">    pending async transaction 163968: d0a73900 from 0:0 to 3419:0 code 9 flags 11 pri 0:120 r0 node 15271 size 76:4 data f6a04a80</span><br><span class="line">    pending async transaction 164154: dc771680 from 0:0 to 3419:0 code a flags 11 pri 0:120 r0 node 15271 size 244:32 data f6a04bfc</span><br><span class="line">    pending async transaction 164192: d7bae280 from 0:0 to 3419:0 code 9 flags 11 pri 0:120 r0 node 15271 size 76:4 data f6a04e94</span><br><span class="line">    pending async transaction 164243: d7bae680 from 0:0 to 3419:0 code a flags 11 pri 0:120 r0 node 15271 size 244:32 data f6a04f50</span><br><span class="line">    pending async transaction 164271: d7bae980 from 0:0 to 3419:0 code 9 flags 11 pri 0:120 r0 node 15271 size 76:4 data f6a051e8</span><br><span class="line">    pending async transaction 164388: e5a41f80 from 0:0 to 3419:0 code 9 flags 11 pri 0:120 r0 node 15271 size 76:4 data f6a052a4</span><br><span class="line">    pending async transaction 164785: e96bc800 from 0:0 to 3419:0 code 9 flags 11 pri 0:120 r0 node 15271 size 76:4 data f6a05360</span><br><span class="line">    pending async transaction 164894: dc31c500 from 0:0 to 3419:0 code 9 flags 11 pri 0:120 r0 node 15271 size 76:4 data f6a0541c</span><br></pre></td></tr></table></figure><h2 id="另外-会有一个"><a href="#另外-会有一个" class="headerlink" title="另外,会有一个:"></a>另外,会有一个:</h2><pre><code>radio         2973  1612   270 1131000  78576 diagchar_read af10a6a0 S m.android.phone这样的进程.</code></pre><h2 id="kill-3-某个2973-程序会继续往下跑"><a href="#kill-3-某个2973-程序会继续往下跑" class="headerlink" title="kill -3 某个2973,程序会继续往下跑"></a>kill -3 某个2973,程序会继续往下跑</h2><h2 id="具体看附件"><a href="#具体看附件" class="headerlink" title="具体看附件"></a>具体看附件</h2><pre><code>file 目录下面</code></pre><h2 id="改NV值70287-可以规避问题-但未找到根本原因"><a href="#改NV值70287-可以规避问题-但未找到根本原因" class="headerlink" title="改NV值70287 可以规避问题,但未找到根本原因."></a>改NV值70287 可以规避问题,但未找到根本原因.</h2><pre><code>后续有时间继续跟踪</code></pre>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>黑屏分析</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/hei-ping-fen-xi/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/hei-ping-fen-xi/</url>
      
        <content type="html"><![CDATA[<h1 id="黑屏分析"><a href="#黑屏分析" class="headerlink" title="黑屏分析"></a>黑屏分析</h1><h2 id="首先-分析各进程状态"><a href="#首先-分析各进程状态" class="headerlink" title="首先,分析各进程状态"></a>首先,分析各进程状态</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">adb shell ps |grep -i surfaceflinger</span><br><span class="line">adb shell ps |grep -i system_server</span><br></pre></td></tr></table></figure><p>都正常的存在</p><h2 id="产生system-server-btraces文件"><a href="#产生system-server-btraces文件" class="headerlink" title="产生system_server btraces文件"></a>产生system_server btraces文件</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">adb shell kill -3 913</span><br><span class="line">adb pull /data/anr/</span><br></pre></td></tr></table></figure><p>trace_00<br>结果正常</p><h2 id="产生system-server-btraces文件-1"><a href="#产生system-server-btraces文件-1" class="headerlink" title="产生system_server btraces文件"></a>产生system_server btraces文件</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">adb shell debuggerd -b 385 |tee surfaceflinger_385_05.log</span><br><span class="line">for i in &#123;1..100&#125;; do adb shell debuggerd -b 385 &gt;  surfaceflinger_385_$i.log;sleep 1;done</span><br></pre></td></tr></table></figure><p>用对比工具做对比发现调用堆栈,内容基本不变,无论做什么操作.看似正常.</p><h2 id="查看binder状态"><a href="#查看binder状态" class="headerlink" title="查看binder状态"></a>查看binder状态</h2><p>adb pull /sys/kernel/debug/binder/</p><p>下面是感觉不太正常的 pid<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">proc 385</span><br><span class="line">context binder</span><br><span class="line">  node 5612880: u00000000ac61cf40 c00000000ae8963b4 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 947</span><br><span class="line">  node 12654566: u00000000ac61cf60 c00000000ae896954 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 3098</span><br><span class="line">  node 12654595: u00000000ac6241e0 c00000000ac649374 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 5612888: u00000000ac624ef0 c00000000ae8965f4 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 947</span><br><span class="line">  node 12654684: u00000000ac62b010 c00000000ae893b88 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 5612913: u00000000ac62b630 c00000000ae896684 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 947</span><br><span class="line">  node 5612948: u00000000ac62b640 c00000000ac6490a4 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 12654686: u00000000ac62b770 c00000000ae893dbc pri 0:139 hs 1 hw 1 ls 0 lw 0 is 2 iw 2 tr 1 proc 3098 913</span><br><span class="line">  node 16754: u00000000ac6a93b0 c00000000ae894dd4 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 2 iw 2 tr 1 proc 2231 913</span><br><span class="line">  node 16752: u00000000ac6a93e0 c00000000ae894e20 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 10880475: u00000000ac6a9420 c00000000ae896594 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 2226</span><br><span class="line">  node 10880481: u00000000ac6a9490 c00000000ae8966b4 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 2226</span><br><span class="line">  node 17259: u00000000ac6a9510 c00000000ac6ab0f0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 17261: u00000000ac6a9910 c00000000ac6ab0a4 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 2 iw 2 tr 1 proc 2231 913</span><br><span class="line">  node 10880508: u00000000ac6a9980 c00000000ae8967d4 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 2226</span><br><span class="line">  node 10880527: u00000000ac6a99f0 c00000000ac649414 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 9914726: u00000000ac6a9a00 c00000000ae8964d4 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 1156</span><br><span class="line">  node 12654345: u00000000ac6a9a30 c00000000ae8968f4 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 3098</span><br><span class="line">  node 98067: u00000000ac6a9a60 c00000000ae893110 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 2033921: u00000000ac6a9a70 c00000000ae893e80 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 98069: u00000000ac6a9e80 c00000000ae89269c pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 27312: u00000000ac6a9ee0 c00000000ae8960e4 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 27319: u00000000ac6a9f20 c00000000ae8963e4 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 12654351: u00000000ac6a9fe0 c00000000ae896924 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 3098</span><br><span class="line">  node 12653178: u00000000ac6bc020 c00000000ae896534 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 3733</span><br><span class="line">  node 12653184: u00000000ac6bc030 c00000000ae896624 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 3733</span><br><span class="line">  node 9914732: u00000000ac6bc040 c00000000ae896564 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 1156</span><br><span class="line">  node 2033923: u00000000ac6bca90 c00000000ae893c7c pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 821: u00000000ac6f6400 c00000000ac67c244 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 253</span><br><span class="line">  node 96256: u00000000ac6f6450 c00000000ae8a4034 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 2046: u00000000ac6f6950 c00000000ae896144 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 2052: u00000000ac6f6960 c00000000ae8961a4 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 2904: u00000000ac6f6970 c00000000ae8a3ef4 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 2911: u00000000ac6f6980 c00000000ae8961d4 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 2917: u00000000ac6f6990 c00000000ae896204 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 2923: u00000000ac6f69a0 c00000000ae896234 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 2929: u00000000ac6f69b0 c00000000ae896264 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 4374: u00000000ac6f69c0 c00000000ae896294 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 4380: u00000000ac6f69d0 c00000000ae896174 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 8427: u00000000ac6f69e0 c00000000ae8962c4 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 2231</span><br><span class="line">  node 8434: u00000000ac6f69f0 c00000000ae8962f4 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 2231</span><br><span class="line">  node 8679: u00000000ac6f6a20 c00000000ae8a3cc4 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 96756: u00000000ac6f6a40 c00000000ae896654 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 99151: u00000000ac6f6ed0 c00000000ae896744 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 99158: u00000000ac6f6f10 c00000000ae8967a4 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 817: u00000000ae88ef90 c00000000ae8b6004 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 8 iw 8 tr 1 proc 3098 3733 2226 1156 947 2231 913 253</span><br><span class="line">  node 2058: u00000000ae8c05d0 c00000000ae889188 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 8604: u00000000ae8c0c50 c00000000ae896324 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 2231</span><br><span class="line"></span><br><span class="line">proc 2231</span><br><span class="line">context binder</span><br><span class="line">  node 5414037: u0000000094b52050 c000000009285e9a0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 5414039: u0000000094b520a0 c000000009285ea60 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 5413886: u0000000094f6aa20 c00000000928ff400 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 5413895: u0000000094f6aab0 c00000000928ff460 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 23830: u0000000095a9d5e0 c0000000095466de0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 16922: u0000000096338120 c000000009631fd20 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 17001: u00000000963385d0 c0000000095ea2a28 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 385</span><br><span class="line">  node 17169: u0000000096338610 c0000000095ea2a60 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 17220: u0000000096338650 c0000000095ea2a80 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 17617: u00000000963387e0 c0000000095ea2da0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 17637: u0000000096338810 c0000000095ea2dc0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14681: u0000000096b0d020 c0000000096b7eb60 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14715: u0000000096b0d030 c0000000096b7eb80 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14725: u0000000096b0d060 c0000000096b7eba0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14735: u0000000096b0d070 c0000000096b7ebc0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14750: u0000000096b0d090 c0000000096b7ebe0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14762: u0000000096b0d0c0 c0000000096b7ec00 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14774: u0000000096b0d0e0 c0000000096b7ec20 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14781: u0000000096b0d100 c0000000096b7ec40 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14817: u0000000096b0d120 c0000000096b7ec60 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14825: u0000000096b0d140 c0000000096b7ec80 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14864: u0000000096b0d170 c0000000096b7eca0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14869: u0000000096b0d180 c0000000096b7ecc0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14893: u0000000096b0d1a0 c0000000096b7ece0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14908: u0000000096b0d200 c0000000096b7ed00 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14938: u0000000096b0d220 c0000000096b7ed40 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14927: u0000000096b0d230 c0000000096b7ed20 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15056: u0000000096b0d260 c0000000096b7ed80 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15059: u0000000096b0d280 c0000000096b7eda0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15095: u0000000096b0d2d0 c0000000096b7edc0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15104: u0000000096b0d300 c0000000096b7ede0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15112: u0000000096b0d320 c0000000096b7ee00 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15124: u0000000096b0d350 c0000000096b7ee20 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15148: u0000000096b0d3d0 c0000000096b7ee40 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15163: u0000000096b0d410 c0000000096b7ee60 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15182: u0000000096b0d420 c0000000096b7eea0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15174: u0000000096b0d430 c0000000096b7ee80 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15298: u0000000096b0d480 c0000000096b7ef00 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15251: u0000000096b0d4b0 c0000000096b7eec0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15264: u0000000096b0d570 c0000000096b7eee0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15397: u0000000096b0d650 c0000000096b11280 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15407: u0000000096b0d680 c0000000096b112a0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15414: u0000000096b0d6a0 c0000000096b112c0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15445: u0000000096b0d6b0 c0000000096b112e0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15488: u0000000096b0d700 c0000000096b11340 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15502: u0000000096b0d720 c0000000096b11360 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15508: u0000000096b0d7b0 c0000000096b113c0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15475: u0000000096b0d7d0 c0000000096b11300 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15523: u0000000096b0d7f0 c0000000096b113e0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15542: u0000000096b0d820 c0000000096b11400 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15482: u0000000096b0dab0 c0000000096b11320 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15768: u0000000096b0db70 c0000000096b115a0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15778: u0000000096b0db80 c0000000096b115c0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 15788: u0000000096b0dbb0 c0000000096b115e0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 16330: u0000000096b0ddb0 c000000009631fa80 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 16625: u0000000096b0dde0 c000000009631faa0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 10118: u0000000096bf3380 c0000000096bf7d60 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 10188: u0000000096bf3410 c0000000096bf7de0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 10196: u0000000096bf3430 c0000000096bf7e00 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 10234: u0000000096bf3450 c0000000096bf7e20 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 10268: u0000000096bf3490 c0000000096bf7e40 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 10798: u0000000096bf37a0 c00000000a4ac6ca0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 11297: u0000000096bf3810 c00000000973b8240 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 11299: u0000000096bf3830 c00000000973b8280 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 12241: u0000000096bf3a90 c00000000973b8740 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 412</span><br><span class="line">  node 14183: u0000000096bf3d40 c0000000096b7e980 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14224: u0000000096bf3d90 c0000000096b7ea00 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14241: u0000000096bf3e10 c0000000096b7ea20 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14514: u0000000096bf3e50 c0000000096b7ea60 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14550: u0000000096bf3ea0 c0000000096b7ea80 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14594: u0000000096bf3f40 c0000000096b7eaa0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14631: u0000000096bf3fb0 c0000000096b7eb00 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14644: u0000000096bf3fe0 c0000000096b7eb20 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 14658: u0000000096bf3ff0 c0000000096b7eb40 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 8339: u00000000976ef0a0 c00000000976e5920 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 8357: u00000000976ef720 c00000000af4e9500 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 8511: u00000000976ef760 c00000000976e5b00 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 8513: u00000000976ef770 c00000000976e5b20 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 8365: u00000000976ef780 c00000000976e5940 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 7975: u00000000976ef810 c00000000afc1d5a8 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 411</span><br><span class="line">  node 7989: u00000000976ef8a0 c00000000976e59c0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 9231: u00000000976efa10 c00000000976e5a60 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 9274: u00000000976efa70 c00000000976e5c80 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 8508: u00000000976efc00 c00000000976e59a0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 8621: u00000000976efd00 c00000000976e5bc0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 9290: u00000000976efd40 c00000000976e5d40 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 8693: u00000000976efde0 c00000000976e5c40 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 9281: u00000000976efdf0 c00000000976e5ce0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 9308: u00000000976efe80 c00000000976e5d60 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 6538: u00000000a5d69840 c00000000af4e98e0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 6563: u00000000a5d69860 c00000000af4e9900 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 6580: u00000000a5d69880 c00000000af4e9920 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 202529: u00000000a5d69a40 c0000000096b57640 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 6770: u00000000a5d69be0 c00000000af4e9ca0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 6800: u00000000a5d69c20 c00000000af4e9cc0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 6889: u00000000a5d69d20 c00000000af4e9ec0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 6932: u00000000a5d69d60 c00000000af4e9f00 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 6938: u00000000a5d69d80 c00000000af4e9fe0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 6944: u00000000a5d69da0 c00000000a6fc07a0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 6967: u00000000a5d69dd0 c00000000a6fc08c0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 202549: u00000000a5d69e00 c0000000096b57660 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 5869: u00000000a6fec3c0 c00000000af4e9240 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 5904: u00000000a6fec4f0 c00000000af4e9260 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 5916: u00000000a6fec510 c00000000af4e92a0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 5909: u00000000a6fec550 c00000000af4e9280 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 5920: u00000000a6fec570 c00000000af4e92c0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 5953: u00000000a6fec5c0 c00000000af4e92e0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 5964: u00000000a6fec5e0 c00000000af4e9300 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 5971: u00000000a6fec630 c00000000af4e9320 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 5975: u00000000a6fec650 c00000000af4e9340 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 5979: u00000000a6fec670 c00000000af4e9360 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 5986: u00000000a6fec6e0 c00000000af4e9380 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 6040: u00000000a6fec810 c00000000af4e93a0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 6141: u00000000a6fec8e0 c00000000af4e93c0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 6147: u00000000a6fec900 c00000000af4e93e0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 6163: u00000000a6fec920 c00000000af4e9400 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 6294: u00000000a6fecb30 c00000000af4e9460 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 6301: u00000000a6fecb80 c00000000af4e9420 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 4929: u00000000af483ef0 c00000000a6ffa2a0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 9405: u00000000af4ea010 c00000000af4e96c0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 18154: u00000000af4ea0f0 c00000000af4e94a0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 9366: u00000000af4ea100 c00000000976e5a40 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 18162: u00000000af4ea140 c00000000af4e9620 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 9453: u00000000af4ea180 c00000000976e5e20 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 18178: u00000000af4ea1c0 c00000000af4e9660 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 10084: u00000000af4ea290 c0000000096bf7d40 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 9540: u00000000af4ea3f0 c00000000976e5d20 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 18446: u00000000af4ea860 c00000000af4ebf58 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 411</span><br><span class="line">  node 18927: u00000000af4eac80 c00000000976f4e60 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 202510: u00000000af4ead40 c0000000096b57600 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 5015: u00000000af4f30c0 c00000000a6ffa500 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 5808: u00000000af4f31d0 c00000000af4e91e0 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  node 5829: u00000000af4f3250 c00000000af4e9220 pri 0:139 hs 1 hw 1 ls 0 lw 0 is 1 iw 1 tr 1 proc 913</span><br><span class="line">  buffer 9970: 00000000 size 0:0:0 delivered</span><br><span class="line">  buffer 5414280: 00000000 size 4:0:0 delivered</span><br><span class="line">  buffer 12850338: 00000000 size 8:0:0 delivered</span><br><span class="line">  buffer 12907701: 00000000 size 68:0:0 delivered</span><br></pre></td></tr></table></figure></p><h2 id="关注一开始-没有注意到的systemui"><a href="#关注一开始-没有注意到的systemui" class="headerlink" title="关注一开始,没有注意到的systemui"></a>关注一开始,没有注意到的systemui</h2><p>其他很多应用由和sysetmui一样的现象,先不做分析</p><h2 id="kill-system-server-看能否恢复"><a href="#kill-system-server-看能否恢复" class="headerlink" title="kill system_server 看能否恢复"></a>kill system_server 看能否恢复</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">adb shell kill -9 913 (system_server)</span><br></pre></td></tr></table></figure><p>观察到黑屏现象,还继续存在.<br>说明问题出在下层.</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">adb shell cat /sys/class/graphics/fb0/msm_fb_panel_info &gt; msm_fb_panel_info_02.log</span><br><span class="line">adb shell cat /sys/class/leds/lcd-backlight/brightness</span><br></pre></td></tr></table></figure><h1 id="最后发现是QCOM-图形库的问题"><a href="#最后发现是QCOM-图形库的问题" class="headerlink" title="最后发现是QCOM 图形库的问题"></a>最后发现是QCOM 图形库的问题</h1><p>更新SBA搞定.</p>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>科学上网</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/ke-xue-shang-wang/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/ke-xue-shang-wang/</url>
      
        <content type="html"><![CDATA[<p>让终端走代理的几种方法<br>Macproxyterminal<br>（2017.9.17更新）</p><p>方法1:<br>在终端中直接运行命令</p><p>export http_proxy=”socks5://127.0.0.1:1080”<br>export https_proxy=”socks5://127.0.0.1:1080”</p><p>1<br>export http_proxy=<a href="http://proxyAddress:port" rel="external nofollow noopener noreferrer" target="_blank">http://proxyAddress:port</a><br>这个办法的好处是简单直接，并且影响面很小（只对当前终端有效，退出就不行了）。</p><p>如果你用的是ss代理，在当前终端运行以下命令，那么wget curl 这类网络命令都会经过ss代理</p><p>1<br>export ALL_PROXY=socks5://127.0.0.1:1080<br>方法2:<br>把代理服务器地址写入shell配置文件.bashrc或者.zshrc</p><p>直接在.bashrc或者.zshrc添加下面内容</p><p>1<br>2<br>export http_proxy=”<a href="http://localhost:port&quot;" rel="external nofollow noopener noreferrer" target="_blank">http://localhost:port&quot;</a><br>export https_proxy=”<a href="http://localhost:port&quot;" rel="external nofollow noopener noreferrer" target="_blank">http://localhost:port&quot;</a><br>以使用shadowsocks代理为例，ss的代理端口为1080,那么应该设置为</p><p>1<br>2<br>export http_proxy=”socks5://127.0.0.1:1080”<br>export https_proxy=”socks5://127.0.0.1:1080”<br>或者直接设置ALL_PROXY</p><p>1<br>export ALL_PROXY=socks5://127.0.0.1:1080<br>localhost就是一个域名，域名默认指向 127.0.0.1，两者是一样的。</p><p>然后ESC后:wq保存文件，接着在终端中执行<br>source ~/.bashrc</p><p>或者退出当前终端再起一个终端。 这个办法的好处是把代理服务器永久保存了，下次就可以直接用了。</p><p>或者通过设置alias简写来简化操作，每次要用的时候输入setproxy，不用了就unsetproxy。</p><p>1<br>2<br>3<br>alias setproxy=”export ALL_PROXY=socks5://127.0.0.1:1080”<br>alias unsetproxy=”unset ALL_PROXY”<br>alias ip=”curl -i <a href="http://ip.cn&quot;" rel="external nofollow noopener noreferrer" target="_blank">http://ip.cn&quot;</a><br>方法3:<br>改相应工具的配置，比如apt的配置</p><p>1<br>sudo vim /etc/apt/apt.conf<br>在文件末尾加入下面这行</p><p>1<br>Acquire::http::Proxy “<a href="http://proxyAddress:port&quot;" rel="external nofollow noopener noreferrer" target="_blank">http://proxyAddress:port&quot;</a><br>保存apt.conf文件即可。<br>关于apt的代理设置可以参考这里</p><p>关于git的代理设置看这里:用shadowsocks加速git clone</p><p>方法4(推荐):<br>利用proxychains在终端使用socks5代理</p><p>补充：<br>如果代理服务器需要登陆，这时可以直接把用户名和密码写进去</p><p>1<br>http_proxy=<a href="http://userName:password@proxyAddress:port" rel="external nofollow noopener noreferrer" target="_blank">http://userName:password@proxyAddress:port</a></p>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>批量替换代码中的字符串</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/pi-liang-shan-chu-dai-ma-zhong-de-zi-fu-chuan/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/pi-liang-shan-chu-dai-ma-zhong-de-zi-fu-chuan/</url>
      
        <content type="html"><![CDATA[<h1 id="批量替换代码中的字符串"><a href="#批量替换代码中的字符串" class="headerlink" title="批量替换代码中的字符串"></a>批量替换代码中的字符串</h1><ul><li>下面command 的意思是： 找出所有含有xxx.字符串的文件,并且把xxx换成han<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">grep -r &apos;xxx\.&apos; . |awk -F&apos;:&apos; &apos;&#123;print $1&#125;&apos; | xargs sed -i &apos;s/xxx\./han\./&apos;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>把所有CPU拉到最高</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/la-qi-suo-you-cpu/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/la-qi-suo-you-cpu/</url>
      
        <content type="html"><![CDATA[<h1 id="把所有CPU拉到最高"><a href="#把所有CPU拉到最高" class="headerlink" title="把所有CPU拉到最高"></a>把所有CPU拉到最高</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">adb root</span><br><span class="line">adb shell setenforce 0</span><br><span class="line">adb remount</span><br><span class="line">adb shell &quot;echo 1 &gt; /sys/devices/system/cpu/cpu0/online&quot;</span><br><span class="line">adb shell &quot;echo 1 &gt; /sys/devices/system/cpu/cpu1/online&quot;</span><br><span class="line">adb shell &quot;echo 1 &gt; /sys/devices/system/cpu/cpu2/online&quot;</span><br><span class="line">adb shell &quot;echo 1 &gt; /sys/devices/system/cpu/cpu3/online&quot;</span><br><span class="line">adb shell &quot;echo performance &gt; /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor&quot;</span><br><span class="line">adb shell &quot;echo performance &gt; /sys/devices/system/cpu/cpu1/cpufreq/scaling_governor&quot;</span><br><span class="line">adb shell &quot;echo performance &gt; /sys/devices/system/cpu/cpu2/cpufreq/scaling_governor&quot;</span><br><span class="line">adb shell &quot;echo performance &gt; /sys/devices/system/cpu/cpu3/cpufreq/scaling_governor&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">adb shell cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_cur_freq</span><br><span class="line">adb shell cat /sys/devices/system/cpu/cpu1/cpufreq/cpuinfo_cur_freq</span><br><span class="line">adb shell cat /sys/devices/system/cpu/cpu2/cpufreq/cpuinfo_cur_freq</span><br><span class="line">adb shell cat /sys/devices/system/cpu/cpu3/cpufreq/cpuinfo_cur_freq</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>VTS测试说明</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/vts-ce-shi-bu-zou/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/vts-ce-shi-bu-zou/</url>
      
        <content type="html"><![CDATA[<h1 id="VTS测试说明"><a href="#VTS测试说明" class="headerlink" title="VTS测试说明"></a>VTS测试说明</h1><h2 id="VTS包目录结构"><a href="#VTS包目录结构" class="headerlink" title="VTS包目录结构"></a>VTS包目录结构</h2><hr><h2 id=""><a href="#" class="headerlink" title="  "></a><img src="amWiki/images/vts01.png" alt="vts" title="vts">  </h2><hr><p>解压包(如果设备是64位的就解压64位,32位就解压32位)</p><font size="5"><br>unzip android-vts-4632653-v4-arm_64.zip<br>unzip system-aosp_arm_a-4632655.zip<br></font><hr><p>解压完成之后,目录结构如下:</p><p><img src="amWiki/images/vts02.png" alt="vts" title="vts">  </p><h2 id="烧入GSI包里面对应的system-image"><a href="#烧入GSI包里面对应的system-image" class="headerlink" title="烧入GSI包里面对应的system image"></a>烧入GSI包里面对应的system image</h2><ul><li>确认手机安全patch的版本:</li></ul><p>Settings –&gt; Security &amp; location –&gt; Security update</p><p><img src="amWiki/images/vts03.png" alt="vts" title="vts"> </p><ul><li>刷对应的 system image:</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd GSI/</span><br><span class="line">adb reboot bootloader</span><br><span class="line">fastboot flash system system-aosp_arm_a-2018-03-05.img</span><br><span class="line">fastboot erase userdata</span><br><span class="line">fastboot reboot</span><br></pre></td></tr></table></figure><ul><li>跑VTS:</li></ul><ol><li><p>Settings –&gt; Display –&gt; Sleep –&gt; 30 minutes(or never)</p></li><li><p>打开开发者选项,连接usb</p></li><li><p>开始跑vts</p></li></ol><p>cd android-vts/tools/<br>./vts-tradefed<br>run vts</p><p><img src="amWiki/images/vts04.png" alt="vts" title="vts"> </p><h2 id="单独测试某个模块"><a href="#单独测试某个模块" class="headerlink" title="单独测试某个模块"></a>单独测试某个模块</h2><p>run vts -m  VtsHalDrmV1_0Target</p><h2 id="读取设备唯一值"><a href="#读取设备唯一值" class="headerlink" title="读取设备唯一值"></a>读取设备唯一值</h2><p>adb shell cat /sys/devices/soc/7824900.sdhci/mmc_host/mmc0/mmc0:0001/serial<br>adb shell getprop ro.boot.serialno</p>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>常用暗码</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/chang-yong-an-ma/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/chang-yong-an-ma/</url>
      
        <content type="html"><![CDATA[<h1 id="常用暗码"><a href="#常用暗码" class="headerlink" title="常用暗码"></a>常用暗码</h1><table><thead><tr><th>描述</th><th>旧暗码</th><th>修过后暗码</th><th>来源</th><th>状态</th></tr></thead><tbody><tr><td>MMI_REGULATORY_INFO_DISPLAY</td><td>*#07#</td><td>*#07#</td><td>Android默认，不用修改</td><td>Delete, Default not show and no req to show this</td></tr><tr><td>PRL_VERSION_DISPLAY</td><td>*#0000#</td><td>*#0000#</td><td>Android默认，不用修改</td><td>Delete, Default not show and no req to show this</td></tr><tr><td>MMI_IMEI_DISPLAY</td><td>*#06#</td><td>*#06#</td><td>Android默认，不用修改</td><td>Done</td></tr><tr><td>Phone information</td><td><em>#</em>#4636#<em>#</em></td><td><em>#</em>#4636#<em>#</em></td><td>Android默认，不用修改</td><td>Done</td></tr><tr><td>MMI_SAR_DISPLAY</td><td>*#16#</td><td><em>#717#</em></td><td>OEM</td><td>Done</td></tr><tr><td>PRODUCT_NAME_AND_SOFTWARE_VERSION</td><td>*#4636#</td><td>*#6163#</td><td>OEM</td><td>Done</td></tr><tr><td>MMITEST_MODE</td><td>*#2886#</td><td>*#9999#</td><td>OEM</td><td>Done</td></tr><tr><td>Open Han logcat</td><td><em>#</em>#0574#<em>#</em></td><td><em>#</em>#6242#<em>#</em></td><td>OEM</td><td>Done</td></tr><tr><td>GOOGLE_APP_CONFIG_MODE</td><td>###666#</td><td>###466#</td><td>OEM</td><td>Done</td></tr><tr><td>DIAG_PROTECTOR_MODE</td><td>###2324#</td><td>###3414#</td><td>OEM</td><td>Done</td></tr><tr><td>Enable/disable auto answer mode</td><td>*#267934#</td><td>*#267934#</td><td>OEM</td><td>Done</td></tr><tr><td>MMI_CALLDURATION_COUNT_DISPLAY</td><td>###232#</td><td>###2155#</td><td>OEM</td><td>ongoing</td></tr><tr><td>ENGINEERING_MODE_CODE</td><td><em>#</em>#3646633#<em>#</em></td><td><em>#</em>#4267#<em>#</em></td><td>OEM</td><td>ongoing</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>工作笔记</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/gong-zuo-bi-ji/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/gong-zuo-bi-ji/</url>
      
        <content type="html"><![CDATA[<h2 id="从ffbm切回android："><a href="#从ffbm切回android：" class="headerlink" title="从ffbm切回android："></a>从ffbm切回android：</h2><ul><li><code>adb root</code>    (如果前面有过这个就不用重新root了）</li><li><code>adb shell &quot;echo normal &gt; /dev/block/bootdevice/by-name/misc&quot;</code></li><li><code>adb reboot</code>  等待重新开机即可</li></ul><h2 id="MMITEST-暗码"><a href="#MMITEST-暗码" class="headerlink" title="MMITEST 暗码"></a>MMITEST 暗码</h2><font size="5"><br><code>*#*#83789#*#*</code><br></font><h2 id="编译遇到的错误"><a href="#编译遇到的错误" class="headerlink" title="编译遇到的错误"></a>编译遇到的错误</h2><font size="5"><br><code>.te 无法查找, 原因是文件名字里面有空格 -____-!</code><br></font><h2 id="流程图"><a href="#流程图" class="headerlink" title="流程图"></a>流程图</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">st=&gt;start: 开始</span><br><span class="line">e=&gt;end: 结束</span><br><span class="line">op=&gt;operation: 我的操作</span><br><span class="line">cond=&gt;condition: 确认？</span><br><span class="line"></span><br><span class="line">st-&gt;op-&gt;cond</span><br><span class="line">cond(yes)-&gt;e</span><br><span class="line">cond(no)-&gt;op</span><br></pre></td></tr></table></figure><h2 id="服务器添加新仓库后，本地使用repo如何同步更新代码"><a href="#服务器添加新仓库后，本地使用repo如何同步更新代码" class="headerlink" title="服务器添加新仓库后，本地使用repo如何同步更新代码"></a>服务器添加新仓库后，本地使用repo如何同步更新代码</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cd ~/xxx/.repo/manifest</span><br><span class="line">git fetch origin</span><br><span class="line">git rebase -i origin/master (hipad)</span><br></pre></td></tr></table></figure><h2 id="调高CPU频率-QCOM"><a href="#调高CPU频率-QCOM" class="headerlink" title="调高CPU频率 QCOM"></a>调高CPU频率 QCOM</h2><ul><li><p>Open:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">adb root</span><br><span class="line">adb shell setenforce 0</span><br><span class="line">adb remount</span><br><span class="line">adb shell &quot;echo 1 &gt; /sys/devices/system/cpu/cpu0/online&quot;</span><br><span class="line">adb shell &quot;echo 1 &gt; /sys/devices/system/cpu/cpu1/online&quot;</span><br><span class="line">adb shell &quot;echo 1 &gt; /sys/devices/system/cpu/cpu2/online&quot;</span><br><span class="line">adb shell &quot;echo 1 &gt; /sys/devices/system/cpu/cpu3/online&quot;</span><br><span class="line">adb shell &quot;echo performance &gt; /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor&quot;</span><br><span class="line">adb shell &quot;echo performance &gt; /sys/devices/system/cpu/cpu1/cpufreq/scaling_governor&quot;</span><br><span class="line">adb shell &quot;echo performance &gt; /sys/devices/system/cpu/cpu2/cpufreq/scaling_governor&quot;</span><br><span class="line">adb shell &quot;echo performance &gt; /sys/devices/system/cpu/cpu3/cpufreq/scaling_governor&quot;</span><br></pre></td></tr></table></figure></li><li><p>Check:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">adb shell cat /sys/devices/system/cpu/cpu0/cpufreq/cpuinfo_cur_freq</span><br><span class="line">adb shell cat /sys/devices/system/cpu/cpu1/cpufreq/cpuinfo_cur_freq</span><br><span class="line">adb shell cat /sys/devices/system/cpu/cpu2/cpufreq/cpuinfo_cur_freq</span><br><span class="line">adb shell cat /sys/devices/system/cpu/cpu3/cpufreq/cpuinfo_cur_freq</span><br></pre></td></tr></table></figure></li></ul><h2 id="查看EMMC供应商信息"><a href="#查看EMMC供应商信息" class="headerlink" title="查看EMMC供应商信息:"></a>查看EMMC供应商信息:</h2><p>QS5509QL:/ # cat sys/emmc_info/name<br>manfid:0xf4:emmc type:Biwin </p><h2 id="IO-Performance"><a href="#IO-Performance" class="headerlink" title="IO Performance"></a>IO Performance</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">for i in $(seq 1 100);do iotop | head -n 10;done</span><br><span class="line"></span><br><span class="line">for i in &#123;1..1000&#125;;do adb shell dumpsys  -t 20 cpuinfo | tail -n 1;done</span><br><span class="line"></span><br><span class="line">cut -d&quot; &quot; -f 1,2,42 /proc/*/stat | sort -n -k +3 </span><br><span class="line"></span><br><span class="line">sort -n -k 10 /proc/diskstats </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">372 (irq/77-mbhc 50</span><br></pre></td></tr></table></figure><h2 id="ATT-mnc-mcc"><a href="#ATT-mnc-mcc" class="headerlink" title="ATT mnc,mcc"></a>ATT mnc,mcc</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;CDR-SMCD-2100&gt;Definition of an AT&amp;T SIM</span><br><span class="line">Summary: SIM cards with one of the following IMSI’s are to be considered an AT&amp;T</span><br><span class="line">SIM card:</span><br><span class="line">• 310-030</span><br><span class="line">• 310 170</span><br><span class="line">• 310-280</span><br><span class="line">• 310-380</span><br><span class="line">310 410</span><br><span class="line">• 310 560</span><br><span class="line">• 311 180</span><br><span class="line">• 310-950 – used for AT&amp;T Lab purposes</span><br><span class="line">&lt;CDR-SMCD-2102&gt;Definition of a FirstNet SIM</span><br><span class="line">Summary: The SIM cards with one of the following IMSI’s are to be considered as</span><br><span class="line">FirstNet SIM cards:</span><br><span class="line">• 313-100</span><br><span class="line">• 312-670</span><br><span class="line">&lt;CKT-SMCD-2100&gt;Definition of a Cricket SIM</span><br><span class="line">Summary:</span><br><span class="line">The SIM cards the following IMSI’s constitutes as a Cricket SIM card:</span><br><span class="line">• 310-150</span><br></pre></td></tr></table></figure><h2 id="强制优化为odex"><a href="#强制优化为odex" class="headerlink" title="强制优化为odex"></a>强制优化为odex</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">adb shell pm force-dex-opt</span><br></pre></td></tr></table></figure><h2 id="git-设置和取消代理"><a href="#git-设置和取消代理" class="headerlink" title="git 设置和取消代理"></a>git 设置和取消代理</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git config --global https.proxy http://127.0.0.1:1080</span><br><span class="line">git config --global https.proxy https://127.0.0.1:1080</span><br><span class="line">git config --global --unset http.proxy</span><br><span class="line">git config --global --unset https.proxy</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git config --global http.proxy &apos;socks5://127.0.0.1:1080&apos;</span><br><span class="line">git config --global https.proxy &apos;socks5://127.0.0.1:1080&apos;</span><br></pre></td></tr></table></figure><h2 id="npm-config-delete-proxy"><a href="#npm-config-delete-proxy" class="headerlink" title="npm config delete proxy"></a>npm config delete proxy</h2><h2 id="上一次的Kernel-LOG"><a href="#上一次的Kernel-LOG" class="headerlink" title="上一次的Kernel LOG"></a>上一次的Kernel LOG</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">QS5509QL:/sys/fs/pstore # cat console-ramoops</span><br><span class="line">QS5509QL:/ # cat /proc/bootmsg</span><br></pre></td></tr></table></figure><h2 id="代码里面获取最顶层的ACTIVITY"><a href="#代码里面获取最顶层的ACTIVITY" class="headerlink" title="代码里面获取最顶层的ACTIVITY"></a>代码里面获取最顶层的ACTIVITY</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ActivityManager.getService().getTasks(1,0).get(0).topActivity.getClassName()</span><br></pre></td></tr></table></figure><h2 id="远程mount-black服务器"><a href="#远程mount-black服务器" class="headerlink" title="远程mount black服务器"></a>远程mount black服务器</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">android@NSGWD180021:/data/workspace/QS5509-QL.dint.xml_0423$ sudo mount -t cifs -o username=&quot;android&quot;,password=&quot;mobile#5&quot; //10.1.6.32/android /mnt/10.1.6.32</span><br><span class="line">android@NSGWD180021:/data/workspace/QS5509-QL.dint.xml_0423$ cd /mnt/10.1.6.32/</span><br></pre></td></tr></table></figure><h2 id="查看内存压力"><a href="#查看内存压力" class="headerlink" title="查看内存压力"></a>查看内存压力</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">usage=`adb shell cat /dev/memcg/memory.usage_in_bytes` &amp;&amp; memsw=`adb shell cat /dev/memcg/memory.memsw.usage_in_bytes` &amp;&amp; let resu=$usage*100 &amp;&amp; let res=$resu/$memsw &amp;&amp; echo $res</span><br></pre></td></tr></table></figure><h2 id="退出FFBM模式"><a href="#退出FFBM模式" class="headerlink" title="退出FFBM模式"></a>退出FFBM模式</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">echo &apos;normal&apos; &gt; /dev/block/platform/soc/7824900.sdhci/by-name/misc</span><br></pre></td></tr></table></figure><h2 id="函数调用堆栈"><a href="#函数调用堆栈" class="headerlink" title="函数调用堆栈"></a>函数调用堆栈</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Slog.w(TAG,android.util.Log.getStackTraceString(new Throwable()));</span><br><span class="line">android.util.Log.w(TAG,android.util.Log.getStackTraceString(new Throwable()));</span><br><span class="line">android.util.Log.w(&quot;jackywei&quot;,&quot;jackywei log&quot;);</span><br></pre></td></tr></table></figure><h2 id="获取binder的pid-uid"><a href="#获取binder的pid-uid" class="headerlink" title="获取binder的pid uid"></a>获取binder的pid uid</h2><h2 id="发送广播"><a href="#发送广播" class="headerlink" title="发送广播"></a>发送广播</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">adb shell am broadcast -a &quot;com.han.enable.collapsed&quot;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">adb shell ps | grep -i systemui | awk &apos;&#123;print $2&#125;&apos; | xargs adb shell kill -9</span><br><span class="line">adb root &amp;&amp; adb remount &amp;&amp; adb push SystemUI.apk /system/priv-app/SystemUI/</span><br></pre></td></tr></table></figure><h2 id="Open-the-MPE"><a href="#Open-the-MPE" class="headerlink" title="Open the MPE"></a>Open the MPE</h2><p>When trying to open the preview (both with Ctrl+Shift+M and Ctrl+Shift+P &gt; ‘Markdown Preview Enhanced: Open Preview’, the following error message appears.</p><h2 id="scp命令使用"><a href="#scp命令使用" class="headerlink" title="scp命令使用"></a>scp命令使用</h2><ul><li>把本地文件夹上传到服务器上面:<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">scp -r /home/android/fotaNodeRespon/fotaservice android@10.1.152.145:/home/android/weibiao/</span><br></pre></td></tr></table></figure></li></ul><h2 id="安装virbox的内核"><a href="#安装virbox的内核" class="headerlink" title="安装virbox的内核"></a>安装virbox的内核</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">切换 GCC 版本到 7.0</span><br><span class="line">sudo /usr/bin/gcc_to_7.sh</span><br><span class="line">编译vbox driver</span><br><span class="line">sudo /sbin/vboxconfig</span><br><span class="line">切换 GCC 到原来4.8版本</span><br><span class="line">sudo /usr/bin/gcc_to_48.sh</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Vtiger 安装</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/an-zhuang-vtiger/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/an-zhuang-vtiger/</url>
      
        <content type="html"><![CDATA[<h1 id="Vtiger-安装"><a href="#Vtiger-安装" class="headerlink" title="Vtiger 安装"></a>Vtiger 安装</h1><h2 id="1-安装阿里云ECS-centos-网页镜像"><a href="#1-安装阿里云ECS-centos-网页镜像" class="headerlink" title="1. 安装阿里云ECS centos 网页镜像."></a>1. 安装阿里云ECS centos 网页镜像.</h2><p>里面会有php,mysql,apache2等应用,不再需要自己安装.</p><h2 id="2-安装vtiger"><a href="#2-安装vtiger" class="headerlink" title="2. 安装vtiger"></a>2. 安装vtiger</h2><p>参考文档:<br><a href="https://www.dailyrazor.com/blog/install-vtiger-crm-on-ubuntu-14.04-vps" rel="external nofollow noopener noreferrer" target="_blank">https://www.dailyrazor.com/blog/install-vtiger-crm-on-ubuntu-14.04-vps</a></p><h2 id="3-修改文件"><a href="#3-修改文件" class="headerlink" title="3. 修改文件:"></a>3. 修改文件:</h2><ul><li><p>修改 /etc/my.cnf</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sql_mode=ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</span><br></pre></td></tr></table></figure></li><li><p>重启服务:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">service mysqld restart</span><br></pre></td></tr></table></figure></li><li><p>修改/etc/php.ini文件.</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">display_errors = On</span><br><span class="line">max_execution_time = 600</span><br><span class="line">error_reporting = E_WARNING &amp; ~E_NOTICE &amp; ~E_DEPRECATED</span><br><span class="line">log_errors = Off</span><br><span class="line">short_open_tag = On</span><br></pre></td></tr></table></figure></li></ul><h2 id="4-新增文件"><a href="#4-新增文件" class="headerlink" title="4. 新增文件"></a>4. 新增文件</h2><p>vi /etc/httpd/conf.d/crm.conf</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;Directory &quot;/var/www/html/crm&quot;&gt;</span><br><span class="line">        Options Indexes FollowSymLinks</span><br><span class="line">        AllowOverride All</span><br><span class="line">        Order deny,allow</span><br><span class="line">        Allow from all</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure><h2 id="5-下载vtiger"><a href="#5-下载vtiger" class="headerlink" title="5. 下载vtiger"></a>5. 下载vtiger</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">wget https://superb-dca2.dl.sourceforge.net/project/vtigercrm/vtiger%20CRM%207.1.0/Core%20Product/vtigercrm7.1.0.tar.gz</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ubuntu Mysql 安装</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/ubuntu-mysql-install/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/ubuntu-mysql-install/</url>
      
        <content type="html"><![CDATA[<h1 id="ubuntu-Mysql-安装"><a href="#ubuntu-Mysql-安装" class="headerlink" title="ubuntu Mysql 安装"></a>ubuntu Mysql 安装</h1><h2 id="安装命令"><a href="#安装命令" class="headerlink" title="安装命令"></a>安装命令</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apt-get install mysql-server</span><br><span class="line">sudo apt-get install mysql-client</span><br><span class="line">sudo apt-get install libmysqlclient-dev</span><br><span class="line">sudo apt-get install mysql-common</span><br></pre></td></tr></table></figure><h2 id="安装错误"><a href="#安装错误" class="headerlink" title="安装错误"></a>安装错误</h2><p>安装过程中未提示输入安装密码,导致不能用root登入，处理方法如下:<br><a href="https://stackoverflow.com/questions/39281594/error-1698-28000-access-denied-for-user-rootlocalhost" rel="external nofollow noopener noreferrer" target="_blank">https://stackoverflow.com/questions/39281594/error-1698-28000-access-denied-for-user-rootlocalhost</a></p><h2 id="删除mysql"><a href="#删除mysql" class="headerlink" title="删除mysql"></a>删除mysql</h2><p>按顺序执行以下命令<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo apt-get autoremove --purge mysql-server-5.0</span><br><span class="line">sudo apt-get remove mysql-server</span><br><span class="line">sudo apt-get autoremove mysql-server</span><br><span class="line">sudo apt-get remove mysql-common</span><br></pre></td></tr></table></figure></p><p>清理残留数据<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dpkg -l |grep ^rc|awk &apos;&#123;print $2&#125;&apos; |sudo xargs dpkg -P</span><br></pre></td></tr></table></figure></p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://stackoverflow.com/questions/39281594/error-1698-28000-access-denied-for-user-rootlocalhost" rel="external nofollow noopener noreferrer" target="_blank">https://stackoverflow.com/questions/39281594/error-1698-28000-access-denied-for-user-rootlocalhost</a></p><p><a href="https://www.cnblogs.com/zhuyp1015/p/3561470.html" rel="external nofollow noopener noreferrer" target="_blank">https://www.cnblogs.com/zhuyp1015/p/3561470.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ubuntu Shadowsocks 安装</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/ubuntuinstallshadowsocks/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/ubuntuinstallshadowsocks/</url>
      
        <content type="html"><![CDATA[<p>ubuntu 安装:<br>Shadowsocks<br><a href="https://blog.csdn.net/u012986684/article/details/53446107" rel="external nofollow noopener noreferrer" target="_blank">https://blog.csdn.net/u012986684/article/details/53446107</a></p><p>18.04 纠错:<br><a href="https://blog.csdn.net/blackfrog_unique/article/details/60320737" rel="external nofollow noopener noreferrer" target="_blank">https://blog.csdn.net/blackfrog_unique/article/details/60320737</a></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">graph TD;</span><br><span class="line">A--&gt;B;</span><br><span class="line">A--&gt;C;</span><br><span class="line">B--&gt;D;</span><br><span class="line">C--&gt;D;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ubuntu trace32 安装</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/trace32/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/trace32/</url>
      
        <content type="html"><![CDATA[<p>#T32: Checking permissions to proceed…</p><p>#T32: No write permission for “/etc/udev/rules.d”.</p><p>#T32: Do you want to run this installation part as root?<br>      (Yes/No) Yes<br>[sudo] password for android:<br>‘/data/mysoftware/TRACE32_R_2018_02_000096069/files/bin/pc_linux64/udev.conf/kernel_starting_2.6.32/10-lauterbach.rules’ -&gt; ‘/etc/udev/rules.d/10-lauterbach.rules’</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#T32: Proceeding...</span><br><span class="line">#T32: Creating config files...</span><br><span class="line"></span><br><span class="line">################################################################################</span><br><span class="line">#T32: Installation of TRACE32 finished.</span><br><span class="line">#</span><br><span class="line">#     To start TRACE32 you will find 4 example configuration files in the</span><br><span class="line">#     installation directory:</span><br><span class="line">#     - config.t32          explaining general config-file syntax.</span><br><span class="line">#     - config_usb.t32      example to start USB-Debugger configurations</span><br><span class="line">#     - config_eth.t32      example to start Ethernet-Debugger configurations</span><br><span class="line">#                           (adapt the debugger IP-address inside!)</span><br><span class="line">#     - config_hostmci.t32  example to start HostMCI configurations</span><br><span class="line">#     - config_sim.t32      example to start Simulator configurations</span><br><span class="line">################################################################################</span><br></pre></td></tr></table></figure><p>Example 1: Start TRACE32 with an attached USB-Debugger for ARM 64bit targets:<br> “/home/android/t32/bin/pc_linux64/t32marm64-qt” -c “/home/android/t32/config_usb.t32”<br>Example 2: Start TRACE32 as PowerPC simulator:<br> “/home/android/t32/bin/pc_linux64/t32mppc-qt” -c “/home/android/t32/config_sim.t32”</p>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>nodejs 安装</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/nodejs-an-zhuang/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/nodejs-an-zhuang/</url>
      
        <content type="html"><![CDATA[<h1 id="nodejs-安装"><a href="#nodejs-安装" class="headerlink" title="nodejs 安装"></a>nodejs 安装</h1><p>先安装nvm:</p><p><a href="https://blog.csdn.net/u010064206/article/details/76714208" rel="external nofollow noopener noreferrer" target="_blank">https://blog.csdn.net/u010064206/article/details/76714208</a></p>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Performance</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/performance/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/performance/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>ubuntu Shadowsocks Error</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/shadowsock/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/shadowsock/</url>
      
        <content type="html"><![CDATA[<ol><li>Because the pac file has wrong data ,But there is no notify to show the problem.Fuck.</li></ol>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>解读Nodejs多核处理模块cluster</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/nodejscluster/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/nodejscluster/</url>
      
        <content type="html"><![CDATA[<h1 id="解读Nodejs多核处理模块cluster"><a href="#解读Nodejs多核处理模块cluster" class="headerlink" title="解读Nodejs多核处理模块cluster"></a>解读Nodejs多核处理模块cluster</h1><p><a href="http://blog.fens.me/nodejs-core-cluster/" rel="external nofollow noopener noreferrer" target="_blank">http://blog.fens.me/nodejs-core-cluster/</a></p>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>qcn备份</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/qcn-bei-fen/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/qcn-bei-fen/</url>
      
        <content type="html"><![CDATA[<h1 id="qcn备份"><a href="#qcn备份" class="headerlink" title="qcn备份"></a>qcn备份</h1><p><font size="5"></font></p><ul><li>连接手机:<br></li></ul><hr><h2 id=""><a href="#" class="headerlink" title="  "></a><img src="amWiki/images/qcn01.png" alt="qcn" title="qcn">  </h2><h2 id="-1"><a href="#-1" class="headerlink" title="  "></a><img src="amWiki/images/qcn02.png" alt="qcn" title="qcn">  </h2><h2 id="-2"><a href="#-2" class="headerlink" title="  "></a><img src="amWiki/images/qcn03.png" alt="qcn" title="qcn">  </h2><p><img src="amWiki/images/qcn04.png" alt="qcn" title="qcn">  </p>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Git 下载代理设置</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/git-xia-zai-dai-li-she-zhi/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/git-xia-zai-dai-li-she-zhi/</url>
      
        <content type="html"><![CDATA[<h1 id="Git-下载代理设置"><a href="#Git-下载代理设置" class="headerlink" title="Git 下载代理设置"></a>Git 下载代理设置</h1><h2 id="永久代理"><a href="#永久代理" class="headerlink" title="永久代理"></a>永久代理</h2><p>git config –global http.proxy ‘socks5://127.0.0.1:1080’<br>git config –global https.proxy ‘socks5://127.0.0.1:1080’  </p><h2 id="临时代理"><a href="#临时代理" class="headerlink" title="临时代理"></a>临时代理</h2><p>export http_proxy=”socks5://127.0.0.1:1080”<br>export https_proxy=”socks5://127.0.0.1:1080”  </p><h1 id="设置ss"><a href="#设置ss" class="headerlink" title="设置ss"></a>设置ss</h1><p>git config –global http.proxy ‘socks5://127.0.0.1:1080’</p><p>git config –global https.proxy ‘socks5://127.0.0.1:1080’</p><h1 id="设置代理"><a href="#设置代理" class="headerlink" title="设置代理"></a>设置代理</h1><p>git config –global https.proxy <a href="http://127.0.0.1:1080" rel="external nofollow noopener noreferrer" target="_blank">http://127.0.0.1:1080</a></p><p>git config –global https.proxy <a href="https://127.0.0.1:1080" rel="external nofollow noopener noreferrer" target="_blank">https://127.0.0.1:1080</a></p><h1 id="取消代理"><a href="#取消代理" class="headerlink" title="取消代理"></a>取消代理</h1><p>git config –global –unset http.proxy<br>git config –global –unset https.proxy</p>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Memory debug</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/memory-debug/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/memory-debug/</url>
      
        <content type="html"><![CDATA[<p>static const char* DEBUG_MALLOC_PROPERTY_PROGRAM = “libc.debug.malloc.program”;<br>bionic/libc/bionic/malloc_common.cpp</p><p>adb shell am dumpheap -n &lt;PID_TO_DUMP&gt; /data/local/tmp/heap.txt</p><p>adb shell stop &amp;&amp; adb shell setprop libc.debug.malloc.program zygote &amp;&amp; adb shell setprop libc.debug.malloc.options backtrace &amp;&amp; adb shell start</p><p>pid=<code>adb shell ps -A | grep -i zygote | awk &#39;{print $2}&#39;</code> &amp;&amp;  adb shell am dumpheap -n $pid /data/local/tmp/heap.txt</p><p>bootanimation</p><p>adb shell stop &amp;&amp; adb shell setprop libc.debug.malloc.program bootanimation &amp;&amp; adb shell setprop libc.debug.malloc.options backtrace &amp;&amp; adb shell start</p><p>pid=<code>adb shell ps -A | grep -i bootanimation | awk &#39;{print $2}&#39;</code> &amp;&amp;  adb shell am dumpheap -n $pid /data/local/tmp/heap.txt</p><p>adb shell ps -A | grep -i bootanimation | awk ‘{print $2} | xargs adb shell kill -28 bootanimation</p><p>adb shell stop &amp;&amp; adb shell setprop libc.debug.malloc.program zygote &amp;&amp; adb shell setprop libc.debug.malloc.options backtrace &amp;&amp; adb shell start</p><h1 id="DEBUG-C-memory"><a href="#DEBUG-C-memory" class="headerlink" title="DEBUG C memory"></a>DEBUG C memory</h1><p>adb shell stop &amp;&amp; adb shell setprop libc.debug.malloc.program app_process &amp;&amp; adb shell setprop libc.debug.malloc.options backtrace=64 &amp;&amp; adb shell start</p><p>adb shell am dumpheap -n <pid> /data/local/tmp/native_heap.txt</pid></p><p>adb shell am dumpheap -n 2911 /data/local/tmp/native_heap.txt<br>adb pull /data/local/tmp/native_heap.txt</p><p>DEBUG完全行不通:<br><a href="https://android.googlesource.com/platform/bionic/+/master/libc/malloc_debug/README.md" rel="external nofollow noopener noreferrer" target="_blank">https://android.googlesource.com/platform/bionic/+/master/libc/malloc_debug/README.md</a></p>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Hello World</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/hello-world/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" rel="external nofollow noopener noreferrer" target="_blank">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" rel="external nofollow noopener noreferrer" target="_blank">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" rel="external nofollow noopener noreferrer" target="_blank">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" rel="external nofollow noopener noreferrer" target="_blank">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" rel="external nofollow noopener noreferrer" target="_blank">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" rel="external nofollow noopener noreferrer" target="_blank">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" rel="external nofollow noopener noreferrer" target="_blank">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" rel="external nofollow noopener noreferrer" target="_blank">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Monkey test command</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/monkey-ce-shi-ming-ling-xing/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/monkey-ce-shi-ming-ling-xing/</url>
      
        <content type="html"><![CDATA[<h1 id="Monkey-test-command"><a href="#Monkey-test-command" class="headerlink" title="Monkey test command"></a>Monkey test command</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">adb -s 202 shell monkey -s 500 --ignore-crashes --ignore-timeouts --monitor-native-crashes -v 1000000 | tee monkey_03.log</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">adb shell monkey -s 200 --ignore-crashes --ignore-timeouts --monitor-native-crashes -v 200 | tee monkey_03.log</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">adb shell monkey -s 500 --throttle 300 --ignore-crashes --ignore-timeouts --monitor-native-crashes -v 1000000 | tee monkey_03.log</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">adb shell monkey -s 500 --ignore-crashes --throttle 3000 --ignore-timeouts --monitor-native-crashes -v 1000000 | tee monkey_03.log</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">adb shell monkey --ignore-crashes --throttle 100 --ignore-timeouts --monitor-native-crashes -v 1000000 | tee monkey_03.log</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>GDB调试手机工程</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/gdb-diao-shi-shou-ce/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/gdb-diao-shi-shou-ce/</url>
      
        <content type="html"><![CDATA[<h1 id="GDB调试手机工程"><a href="#GDB调试手机工程" class="headerlink" title="GDB调试手机工程"></a>GDB调试手机工程</h1><h2 id="挂载自己编译好的工程"><a href="#挂载自己编译好的工程" class="headerlink" title="挂载自己编译好的工程"></a>挂载自己编译好的工程</h2><ul><li><p>以我自己在10.1.6.32编译的工程为例.</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo mount -t cifs -o username=&quot;android&quot;,password=&quot;mobile#5&quot; //10.1.6.32/android /mnt/10.1.6.32</span><br></pre></td></tr></table></figure></li><li><p>错误提示:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mount: block device //10.1.6.36/android is write-protected, mounting read-only</span><br><span class="line">mount: cannot mount block device //10.1.6.36/android read-only</span><br></pre></td></tr></table></figure></li><li><p>实际是密码错误:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo mount -t cifs -o username=&quot;android&quot;,password=&quot;hipad@123&quot; //10.1.6.36/android /mnt/10.1.6.36</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo mount -t cifs -o username=&quot;android&quot;,password=&quot;hipad@123&quot; //10.1.6.14/android /mnt/10.1.6.14</span><br></pre></td></tr></table></figure><h2 id="CIFS文件系统的读写权限"><a href="#CIFS文件系统的读写权限" class="headerlink" title="CIFS文件系统的读写权限"></a>CIFS文件系统的读写权限</h2><ul><li><p>查看用户ID</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">cat /etc/passwd | grep 你的用户名</span><br></pre></td></tr></table></figure></li><li><p>参考网址:<br><a href="https://blog.csdn.net/qq_21808961/article/details/78532487" rel="external nofollow noopener noreferrer" target="_blank">https://blog.csdn.net/qq_21808961/article/details/78532487</a></p></li><li><p>普通用户如何拥有挂载的CIFS文件系统的读写权限:<br><a href="https://blog.csdn.net/u012487272/article/details/80530473" rel="external nofollow noopener noreferrer" target="_blank">https://blog.csdn.net/u012487272/article/details/80530473</a></p></li><li><p>可读写挂载方法:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo mount -t cifs -o username=&quot;android&quot;,password=&quot;hipad@123&quot;,uid=1000,gid=1000 //10.1.6.14/android /mnt/10.1.6.14</span><br></pre></td></tr></table></figure></li><li><p>TIPS:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">参考文档:</span><br><span class="line">http://www.vixual.net/blog/archives/228</span><br></pre></td></tr></table></figure></li></ul><h2 id="编译gdbserver-或者直接用ndk里面的"><a href="#编译gdbserver-或者直接用ndk里面的" class="headerlink" title="编译gdbserver(或者直接用ndk里面的)"></a>编译gdbserver(或者直接用ndk里面的)</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">mmm prebuilts/misc/android-arm/gdbserver/ -j8</span><br><span class="line"></span><br><span class="line">adb push out/target/product/QS5509QL/system/bin/gdbserver system/bin/</span><br></pre></td></tr></table></figure><h2 id="Gdbserver-attatch-你要测试的程序"><a href="#Gdbserver-attatch-你要测试的程序" class="headerlink" title="Gdbserver attatch 你要测试的程序"></a>Gdbserver attatch 你要测试的程序</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">adb shell gdbserver :5039 --attach 2275 (3474 是你要debug的PROCESS PID)</span><br></pre></td></tr></table></figure><h2 id="设置手机端口映射到PC"><a href="#设置手机端口映射到PC" class="headerlink" title="设置手机端口映射到PC"></a>设置手机端口映射到PC</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">adb forward tcp:5039 tcp:5039</span><br></pre></td></tr></table></figure><h2 id="GDB-调试连接"><a href="#GDB-调试连接" class="headerlink" title="GDB 调试连接"></a>GDB 调试连接</h2><ul><li><p>启动GDB</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">android@NSGWD180021:/mnt/10.1.6.32/black/QS5509QL-black/v1A5Z-black-test_memory_leak$</span><br><span class="line"></span><br><span class="line">prebuilts/gdb/linux-x86/bin/gdb</span><br><span class="line"></span><br><span class="line">(gdb) set solib-absolute-prefix /mnt/10.1.6.32/black/QS5509QL-black/v1A5Z-black-test_memory_leak/out/target/product/QS5509QL/symbols/</span><br><span class="line">(gdb) set solib-search-path /mnt/10.1.6.32/black/QS5509QL-black/v1A5Z-black-test_memory_leak/out/target/product/QS5509QL/symbols/system/lib/</span><br><span class="line">(gdb) target remote :5039</span><br><span class="line">(gdb) b jpeg_start_decompress</span><br><span class="line">(gdb) b je_malloc if size &gt; 100000 &amp;&amp; size != 1336</span><br><span class="line">(gdb) c</span><br></pre></td></tr></table></figure></li><li><p>结果</p></li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Thread 40 &quot;Measurement Wor&quot; hit Breakpoint 2, je_malloc (size=120000) at external/jemalloc/src/jemalloc.c:1649</span><br><span class="line">1649if (likely(!malloc_slow)) &#123;</span><br><span class="line">(gdb) bt</span><br><span class="line">#0  je_malloc (size=120000) at external/jemalloc/src/jemalloc.c:1649</span><br><span class="line">#1  0xa99da590 in sqlite3MemMalloc (nByte=120000) at external/sqlite/dist/sqlite3.c:20840</span><br><span class="line">#2  0xa9986d1c in mallocWithAlarm (n=120000, pp=&lt;optimized out&gt;) at external/sqlite/dist/sqlite3.c:24524</span><br><span class="line">#3  sqlite3Malloc (n=5153960875200) at external/sqlite/dist/sqlite3.c:24554</span><br><span class="line">#4  0xa999007c in setupLookaside (db=0x8b9e6e00, pBuf=0x0, sz=1200, cnt=100) at external/sqlite/dist/sqlite3.c:141298</span><br><span class="line">#5  0xa99915f2 in openDatabase (zFilename=&lt;optimized out&gt;, ppDb=&lt;optimized out&gt;, flags=&lt;optimized out&gt;, zVfs=&lt;optimized out&gt;) at external/sqlite/dist/sqlite3.c:143682</span><br><span class="line">#6  0xa9f94f3c in android::nativeOpen (env=0x9d6daf80, clazz=&lt;optimized out&gt;, pathStr=&lt;optimized out&gt;, openFlags=268435456, labelStr=&lt;optimized out&gt;, enableTrace=6 &apos;\006&apos;, enableProfile=0 &apos;\000&apos;, </span><br><span class="line">    lookasideSz=0, lookasideCnt=-2024916864) at frameworks/base/core/jni/android_database_SQLiteConnection.cpp:135</span><br><span class="line">#7  0x70f9719c in android.database.sqlite.SQLiteConnection.nativeOpen ()</span><br><span class="line">   from /mnt/10.1.6.32/black/QS5509QL-black/v1A5Z-black-test_memory_leak/out/target/product/QS5509QL/symbols/system/framework/arm/boot-framework.oat</span><br><span class="line">#8  0x70f975ba in android.database.sqlite.SQLiteConnection.open ()</span><br><span class="line">   from /mnt/10.1.6.32/black/QS5509QL-black/v1A5Z-black-test_memory_leak/out/target/product/QS5509QL/symbols/system/framework/arm/boot-framework.oat</span><br><span class="line">#9  0x70f974ce in android.database.sqlite.SQLiteConnection.open ()</span><br><span class="line">   from /mnt/10.1.6.32/black/QS5509QL-black/v1A5Z-black-test_memory_leak/out/target/product/QS5509QL/symbols/system/framework/arm/boot-framework.oat</span><br><span class="line">#10 0x70f9bf86 in android.database.sqlite.SQLiteConnectionPool.open ()</span><br><span class="line">   from /mnt/10.1.6.32/black/QS5509QL-black/v1A5Z-black-test_memory_leak/out/target/product/QS5509QL/symbols/system/framework/arm/boot-framework.oat</span><br><span class="line">#11 0x70f9bf12 in android.database.sqlite.SQLiteConnectionPool.open ()</span><br><span class="line">   from /mnt/10.1.6.32/black/QS5509QL-black/v1A5Z-black-test_memory_leak/out/target/product/QS5509QL/symbols/system/framework/arm/boot-framework.oat</span><br><span class="line">#12 0x70fa0c8a in android.database.sqlite.SQLiteDatabase.openInner ()</span><br><span class="line">   from /mnt/10.1.6.32/black/QS5509QL-black/v1A5Z-black-test_memory_leak/out/target/product/QS5509QL/symbols/system/framework/arm/boot-framework.oat</span><br><span class="line">#13 0x70fa0858 in android.database.sqlite.SQLiteDatabase.open ()</span><br><span class="line">   from /mnt/10.1.6.32/black/QS5509QL-black/v1A5Z-black-test_memory_leak/out/target/product/QS5509QL/symbols/system/framework/arm/boot-framework.oat</span><br><span class="line">#14 0x70fa0ba6 in android.database.sqlite.SQLiteDatabase.openDatabase ()</span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档:"></a>参考文档:</h2><p><a href="https://wladimir-tm4pda.github.io/porting/debugging_gdb.html" rel="external nofollow noopener noreferrer" target="_blank">https://wladimir-tm4pda.github.io/porting/debugging_gdb.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Flash 越界</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/flash-yue-jie/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/flash-yue-jie/</url>
      
        <content type="html"><![CDATA[<h2 id="现象"><a href="#现象" class="headerlink" title="现象"></a>现象</h2><pre name="code" class="Shell">[  120.430581] sps:BAM 0x04044000 (va:0x00000000) enabled: ver:0x25, number of pipes:6[  122.454233] attempt to access beyond end of device[  122.454263] mmcblk0p38: rw=17, want=25695648, limit=25695181[   15.461154] ueventd: loading /devices/soc/a21b000.qcom,pronto/firmware/wcnss.b09 took 16ms[   15.505953] attempt to access beyond end of device[   15.505985] mmcblk0p38: rw=1, want=25710752, limit=25695181[   15.513746] init: Service 'qcom-c_main-sh' (pid 392) exited with statu[   20.550126] attempt to access beyond end of device[   20.550152] mmcblk0p38: rw=145, want=25710592, limit=25695181[   20.550487] f2fs_msg: 97 callbacks suppressed[   20.550506] F2FS-fs (mmcblk0p38): Issue discard(3213312, 3213312, 512) failed, ret: -5</pre><h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><ul><li><p>可能引起问题的地方:</p><ul><li><font size="5"><a href="http://10.10.1.18:8080/#/c/8254/1/common/build/partition.xml" rel="external nofollow noopener noreferrer" target="_blank">http://10.10.1.18:8080/#/c/8254/1/common/build/partition.xml</a></font><pre><br><img src="amWiki/images/flash_overflow01.png" alt="flash_overflow01" title="flash_overflow01"></pre></li></ul></li><li><p>排查方法</p></li></ul><p>先恢复出问题手机的出厂设置，看能否开机,再往里面填写数据，看能否复现问题.</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">st=&gt;start: 开始</span><br><span class="line">e1=&gt;end: 其他问题</span><br><span class="line">e2=&gt;end: 分区问题</span><br><span class="line">e3=&gt;end: 其他问题</span><br><span class="line">op1=&gt;operation: 恢复出厂设置</span><br><span class="line">cond1=&gt;condition: 可以开机？</span><br><span class="line">op2=&gt;operation: 写入大量数据</span><br><span class="line">cond2=&gt;condition: 能否复现?</span><br><span class="line"></span><br><span class="line">st-&gt;op1-&gt;cond1-&gt;op2-&gt;cond2</span><br><span class="line">cond1(yes)-&gt;op2</span><br><span class="line">cond1(no)-&gt;e1</span><br><span class="line">cond2(yes)-&gt;e2</span><br><span class="line">cond2(no)-&gt;e3</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">graph TD;</span><br><span class="line">A--&gt;B;</span><br><span class="line">A--&gt;C;</span><br><span class="line">B--&gt;D;</span><br><span class="line">C--&gt;D;</span><br></pre></td></tr></table></figure><hr><ul><li>分区表对比(1A54恢复出厂设置之前和之后的分区表,没有区别,但是1A53-4和1A54的分区表有比较大的区别,但貌似不影响测试结果)<br><img src="amWiki/images/compareOfPartition.png" alt="compareOfPartition" title="compareOfPartition"></li></ul><hr><ul><li>填充手机的方法:<br><br> <font size="5"> <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dd if=/dev/zero of=1M.txt bs=1M count=1</span><br></pre></td></tr></table></figure></font></li></ul><p><br><br>    <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dd if=/dev/zero of=100M.txt bs=100M count=1</span><br></pre></td></tr></table></figure></p><p><br><br>    <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">dd if=/dev/zero of=1000M.txt bs=1000M count=1</span><br></pre></td></tr></table></figure></p><p><br><br>    <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">for i in $(seq 1 1000); do adb -s 1f0 push 1000M.txt /sdcard/test/1000M$i.txt;done</span><br></pre></td></tr></table></figure></p><pre><code>&lt;/font&gt;</code></pre><hr><ul><li><p>LOG:<br> 正常的LOG应该是提示: Quota exceeded<br> 不正常的LOG提示:  I/O error</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">android@NSGWD180021:/data/workspace/temp/0329/ioerror$ for i in $(seq 1 1000); do adb -s 1f0 push 1000M.txt /sdcard/test/1000M$i.txt;done</span><br><span class="line">1000M.txt: 1 file pushed. 8.7 MB/s (1048576000 bytes in 114.662s)</span><br><span class="line">1000M.txt: 1 file pushed. 8.4 MB/s (1048576000 bytes in 119.634s)</span><br><span class="line">1000M.txt: 1 file pushed. 8.3 MB/s (1048576000 bytes in 120.693s)</span><br><span class="line">1000M.txt: 1 file pushed. 8.3 MB/s (1048576000 bytes in 121.093s)</span><br><span class="line">1000M.txt: 1 file pushed. 8.3 MB/s (1048576000 bytes in 120.021s)</span><br><span class="line">1000M.txt: 1 file pushed. 8.3 MB/s (1048576000 bytes in 120.392s)</span><br><span class="line">1000M.txt: 1 file pushed. 8.3 MB/s (1048576000 bytes in 119.923s)</span><br><span class="line">1000M.txt: 1 file pushed. 8.3 MB/s (1048576000 bytes in 120.184s)</span><br><span class="line">1000M.txt: 1 file pushed. 8.3 MB/s (1048576000 bytes in 120.583s)</span><br><span class="line">1000M.txt: 1 file pushed. 8.3 MB/s (1048576000 bytes in 120.764s)</span><br><span class="line">1000M.txt: 1 file pushed. 8.0 MB/s (1048576000 bytes in 124.633s)</span><br><span class="line">adb: error: failed to copy &apos;1000M.txt&apos; to &apos;/sdcard/test/1000M12.txt&apos;: remote write failed: Quota exceeded</span><br><span class="line">1000M.txt: 0 files pushed. 8.6 MB/s (302673832 bytes in 33.740s)</span><br><span class="line">adb: error: failed to copy &apos;1000M.txt&apos; to &apos;/sdcard/test/1000M13.txt&apos;: remote write failed: Quota exceeded</span><br><span class="line">1000M.txt: 0 files pushed. 9.7 MB/s (298021344 bytes in 29.364s)</span><br><span class="line">adb: error: failed to copy &apos;1000M.txt&apos; to &apos;/sdcard/test/1000M14.txt&apos;: remote write failed: Quota exceeded</span><br><span class="line">1000M.txt: 0 files pushed. 9.2 MB/s (300970104 bytes in 31.357s)</span><br><span class="line">adb: error: failed to copy &apos;1000M.txt&apos; to &apos;/sdcard/test/1000M15.txt&apos;: remote write failed: Quota exceeded</span><br><span class="line">1000M.txt: 0 files pushed. 8.2 MB/s (300445880 bytes in 35.017s)</span><br><span class="line">adb: error: failed to copy &apos;1000M.txt&apos; to &apos;/sdcard/test/1000M16.txt&apos;: remote write failed: Quota exceeded</span><br><span class="line">1000M.txt: 0 files pushed. 9.8 MB/s (297300536 bytes in 29.071s)</span><br><span class="line">adb: error: failed to copy &apos;1000M.txt&apos; to &apos;/sdcard/test/1000M17.txt&apos;: remote write failed: Quota exceeded</span><br><span class="line">1000M.txt: 0 files pushed. 9.7 MB/s (297890288 bytes in 29.415s)</span><br><span class="line">adb: error: failed to copy &apos;1000M.txt&apos; to &apos;/sdcard/test/1000M18.txt&apos;: remote write failed: Quota exceeded</span><br><span class="line">1000M.txt: 0 files pushed. 9.7 MB/s (297235008 bytes in 29.371s)</span><br><span class="line"></span><br><span class="line">android@U-NSGWD180020:/data/workspace/log$ for i in $(seq 8 1000); do adb -s 1e4fd635 push 100M.txt /sdcard/test/100M$i.txt;done</span><br><span class="line">adb: error: failed to copy &apos;100M.txt&apos; to &apos;/sdcard/test/100M8.txt&apos;: remote write failed: Quota exceeded</span><br><span class="line">100M.txt: 0 files pushed. 13.9 MB/s (99405976 bytes in 6.836s)</span><br><span class="line">adb: error: failed to copy &apos;100M.txt&apos; to &apos;/sdcard/test/100M9.txt&apos;: remote write failed: Quota exceeded</span><br><span class="line">100M.txt: 0 files pushed. 17.8 MB/s (99799144 bytes in 5.354s)</span><br><span class="line">[ 18%] /sdcard/test/100M10.txt^C</span><br><span class="line"></span><br><span class="line">error</span><br><span class="line">1000M.txt: 0 files pushed. 245.3 MB/s (2752176 bytes in 0.011s)</span><br><span class="line">adb: error: failed to copy &apos;1000M.txt&apos; to &apos;/sdcard/test/1000M153.txt&apos;: remote couldn&apos;t create file: I/O error</span><br><span class="line">1000M.txt: 0 files pushed. 247.7 MB/s (2752176 bytes in 0.011s)</span><br><span class="line">adb: error: failed to copy &apos;1000M.txt&apos; to &apos;/sdcard/test/1000M154.txt&apos;: remote couldn&apos;t create file: I/O error</span><br><span class="line">1000M.txt: 0 files pushed. 184.7 MB/s (2883232 bytes in 0.015s)</span><br></pre></td></tr></table></figure><h1 id="问题点"><a href="#问题点" class="headerlink" title="问题点"></a>问题点</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">android@NSGWD180021:/data/workspace/temp/0329/ioerror$ adb -s 1f0 shell df -a</span><br><span class="line">Filesystem            1K-blocks     Used Available Use% Mounted on</span><br><span class="line">rootfs                   439876     1668    438208   1% /</span><br><span class="line">tmpfs                    452888      688    452200   1% /dev</span><br><span class="line">devpts                        0        0         0   0% /dev/pts</span><br><span class="line">proc                          0        0         0   0% /proc</span><br><span class="line">sysfs                         0        0         0   0% /sys</span><br><span class="line">selinuxfs                     0        0         0   0% /sys/fs/selinux</span><br><span class="line">/dev/block/mmcblk0p12   1401624   701420    683820  51% /system</span><br><span class="line">/dev/block/mmcblk0p37    247872   146556     96196  61% /vendor</span><br><span class="line">none                          0        0         0   0% /acct</span><br><span class="line">debugfs                       0        0         0   0% /sys/kernel/debug</span><br><span class="line">tmpfs                    452888        0    452888   0% /mnt</span><br><span class="line">none                          0        0         0   0% /config</span><br><span class="line">none                          0        0         0   0% /dev/cpuctl</span><br><span class="line">/dev/block/mmcblk0p38  13356808 12082296    799376  94% /data</span><br><span class="line">/dev/block/mmcblk0p14    253920      148    248532   1% /cache</span><br><span class="line">/dev/block/mmcblk0p13     28144      236     27256   1% /persist</span><br><span class="line">/dev/block/mmcblk0p8      65488    56896      8592  87% /firmware</span><br><span class="line">tmpfs                    452888        0    452888   0% /storage</span><br><span class="line">tracefs                       0        0         0   0% /sys/kernel/debug/tracing</span><br><span class="line">adb                           0        0         0   0% /dev/usb-ffs/adb</span><br><span class="line">/data/media            13356808 12082296    799376  94% /storage/emulated</span><br><span class="line">android@NSGWD180021:/data/workspace/temp/0329/ioerror$</span><br></pre></td></tr></table></figure></li></ul><h1 id="恢复出厂设置之后"><a href="#恢复出厂设置之后" class="headerlink" title="恢复出厂设置之后:"></a>恢复出厂设置之后:</h1><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">android@NSGWD180021:/data/workspace/temp/0329/ioerror$ adb -s 1f0 shell df -a</span><br><span class="line">Filesystem            1K-blocks   Used Available Use% Mounted on</span><br><span class="line">rootfs                   439876   1668    438208   1% /</span><br><span class="line">tmpfs                    452888    688    452200   1% /dev</span><br><span class="line">devpts                        0      0         0   0% /dev/pts</span><br><span class="line">proc                          0      0         0   0% /proc</span><br><span class="line">sysfs                         0      0         0   0% /sys</span><br><span class="line">selinuxfs                     0      0         0   0% /sys/fs/selinux</span><br><span class="line">/dev/block/mmcblk0p12   1401624 701420    683820  51% /system</span><br><span class="line">/dev/block/mmcblk0p37    247872 146556     96196  61% /vendor</span><br><span class="line">none                          0      0         0   0% /acct</span><br><span class="line">debugfs                       0      0         0   0% /sys/kernel/debug</span><br><span class="line">tmpfs                    452888      0    452888   0% /mnt</span><br><span class="line">none                          0      0         0   0% /config</span><br><span class="line">none                          0      0         0   0% /dev/cpuctl</span><br><span class="line">/dev/block/mmcblk0p38  12845524 377124  12001456   4% /data</span><br><span class="line">/dev/block/mmcblk0p14    237536    392    229284   1% /cache</span><br><span class="line">/dev/block/mmcblk0p13     28144    232     27260   1% /persist</span><br><span class="line">/dev/block/mmcblk0p8      65488  56896      8592  87% /firmware</span><br><span class="line">tmpfs                    452888      0    452888   0% /storage</span><br><span class="line">tracefs                       0      0         0   0% /sys/kernel/debug/tracing</span><br><span class="line">adb                           0      0         0   0% /dev/usb-ffs/adb</span><br><span class="line">/data/media            12845524 377124  12001456   4% /storage/emulated</span><br></pre></td></tr></table></figure><h1 id="修改方案"><a href="#修改方案" class="headerlink" title="修改方案"></a>修改方案</h1><ul><li><p>修改 BoardConfig.mk 里面</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># Modify by weibiao@hipad.com</span><br><span class="line">BOARD_USERDATAIMAGE_PARTITION_SIZE := 13155932160</span><br></pre></td></tr></table></figure></li><li><p>修改后第一开机的df情况  </p></li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">android@NSGWD180021:/data/workspace/temp/0329/ioerror$ adb shell df -a</span><br><span class="line">Filesystem            1K-blocks   Used Available Use% Mounted on</span><br><span class="line">rootfs                   440392   1668    438724   1% /</span><br><span class="line">tmpfs                    453400    688    452712   1% /dev</span><br><span class="line">devpts                        0      0         0   0% /dev/pts</span><br><span class="line">proc                          0      0         0   0% /proc</span><br><span class="line">sysfs                         0      0         0   0% /sys</span><br><span class="line">selinuxfs                     0      0         0   0% /sys/fs/selinux</span><br><span class="line">/dev/block/dm-0         1399728 706292    677052  52% /system</span><br><span class="line">/dev/block/dm-1          243892 148496     90360  63% /vendor</span><br><span class="line">none                          0      0         0   0% /acct</span><br><span class="line">debugfs                       0      0         0   0% /sys/kernel/debug</span><br><span class="line">tmpfs                    453400      0    453400   0% /mnt</span><br><span class="line">none                          0      0         0   0% /config</span><br><span class="line">none                          0      0         0   0% /dev/cpuctl</span><br><span class="line">/dev/block/mmcblk0p38  12845540 382924  11995672   4% /data</span><br><span class="line">/dev/block/mmcblk0p14    253920    148    248532   1% /cache</span><br><span class="line">/dev/block/mmcblk0p13     28144    236     27256   1% /persist</span><br><span class="line">/dev/block/mmcblk0p8      65488  57024      8464  88% /firmware</span><br><span class="line">tmpfs                    453400      0    453400   0% /storage</span><br><span class="line">tracefs                       0      0         0   0% /sys/kernel/debug/tracing</span><br><span class="line">adb                           0      0         0   0% /dev/usb-ffs/adb</span><br><span class="line">/data/media            12845540 382924  11995672   4% /storage/emulated</span><br></pre></td></tr></table></figure><ul><li>修改后第一次开机未重启的,最大填充. 433148 字节未填充满.  </li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">android@NSGWD180021:/data/workspace/temp/0329/ioerror$ adb -s 1f0 shell df -a</span><br><span class="line">Filesystem            1K-blocks     Used Available Use% Mounted on</span><br><span class="line">rootfs                   440392     1668    438724   1% /</span><br><span class="line">tmpfs                    453400      688    452712   1% /dev</span><br><span class="line">devpts                        0        0         0   0% /dev/pts</span><br><span class="line">proc                          0        0         0   0% /proc</span><br><span class="line">sysfs                         0        0         0   0% /sys</span><br><span class="line">selinuxfs                     0        0         0   0% /sys/fs/selinux</span><br><span class="line">/dev/block/dm-0         1399728   706292    677052  52% /system</span><br><span class="line">/dev/block/dm-1          243892   148496     90360  63% /vendor</span><br><span class="line">none                          0        0         0   0% /acct</span><br><span class="line">debugfs                       0        0         0   0% /sys/kernel/debug</span><br><span class="line">tmpfs                    453400        0    453400   0% /mnt</span><br><span class="line">none                          0        0         0   0% /config</span><br><span class="line">none                          0        0         0   0% /dev/cpuctl</span><br><span class="line">/dev/block/mmcblk0p38  12845540 11945448    433148  97% /data</span><br><span class="line">/dev/block/mmcblk0p14    253920      148    248532   1% /cache</span><br><span class="line">/dev/block/mmcblk0p13     28144      236     27256   1% /persist</span><br><span class="line">/dev/block/mmcblk0p8      65488    57024      8464  88% /firmware</span><br><span class="line">tmpfs                    453400        0    453400   0% /storage</span><br><span class="line">tracefs                       0        0         0   0% /sys/kernel/debug/tracing</span><br><span class="line">adb                           0        0         0   0% /dev/usb-ffs/adb</span><br><span class="line">/data/media            12845540 11945448    433148  97% /storage/emulated</span><br></pre></td></tr></table></figure><ul><li>修改后第一次开机重启之后,最大填充. 与上面的数据有出入  </li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">android@NSGWD180021:/data/workspace/temp/0329/ioerror$ adb -s 1f0 shell df -a</span><br><span class="line">Filesystem            1K-blocks     Used Available Use% Mounted on</span><br><span class="line">rootfs                   440392     1668    438724   1% /</span><br><span class="line">tmpfs                    453400      688    452712   1% /dev</span><br><span class="line">devpts                        0        0         0   0% /dev/pts</span><br><span class="line">proc                          0        0         0   0% /proc</span><br><span class="line">sysfs                         0        0         0   0% /sys</span><br><span class="line">selinuxfs                     0        0         0   0% /sys/fs/selinux</span><br><span class="line">/dev/block/dm-0         1399728   706292    677052  52% /system</span><br><span class="line">/dev/block/dm-1          243892   148496     90360  63% /vendor</span><br><span class="line">none                          0        0         0   0% /acct</span><br><span class="line">debugfs                       0        0         0   0% /sys/kernel/debug</span><br><span class="line">tmpfs                    453400        0    453400   0% /mnt</span><br><span class="line">none                          0        0         0   0% /config</span><br><span class="line">none                          0        0         0   0% /dev/cpuctl</span><br><span class="line">/dev/block/mmcblk0p38  12845540 11945304    433292  97% /data</span><br><span class="line">/dev/block/mmcblk0p14    253920      148    248532   1% /cache</span><br><span class="line">/dev/block/mmcblk0p13     28144      236     27256   1% /persist</span><br><span class="line">/dev/block/mmcblk0p8      65488    57024      8464  88% /firmware</span><br><span class="line">tmpfs                    453400        0    453400   0% /storage</span><br><span class="line">tracefs                       0        0         0   0% /sys/kernel/debug/tracing</span><br><span class="line">adb                           0        0         0   0% /dev/usb-ffs/adb</span><br></pre></td></tr></table></figure><ul><li>恢复出厂设置之后</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">android@NSGWD180021:/data/workspace/temp/0329/ioerror$ adb -s 1f0 shell df -a</span><br><span class="line">Filesystem            1K-blocks   Used Available Use% Mounted on</span><br><span class="line">rootfs                   440392   1668    438724   1% /</span><br><span class="line">tmpfs                    453400    688    452712   1% /dev</span><br><span class="line">devpts                        0      0         0   0% /dev/pts</span><br><span class="line">proc                          0      0         0   0% /proc</span><br><span class="line">sysfs                         0      0         0   0% /sys</span><br><span class="line">selinuxfs                     0      0         0   0% /sys/fs/selinux</span><br><span class="line">/dev/block/dm-0         1399728 706292    677052  52% /system</span><br><span class="line">/dev/block/dm-1          243892 148496     90360  63% /vendor</span><br><span class="line">none                          0      0         0   0% /acct</span><br><span class="line">debugfs                       0      0         0   0% /sys/kernel/debug</span><br><span class="line">tmpfs                    453400      0    453400   0% /mnt</span><br><span class="line">none                          0      0         0   0% /config</span><br><span class="line">none                          0      0         0   0% /dev/cpuctl</span><br><span class="line">/dev/block/mmcblk0p38  12845524 381700  11996880   4% /data</span><br><span class="line">/dev/block/mmcblk0p14    237536    392    229284   1% /cache</span><br><span class="line">/dev/block/mmcblk0p13     28144    236     27256   1% /persist</span><br><span class="line">/dev/block/mmcblk0p8      65488  57024      8464  88% /firmware</span><br><span class="line">tmpfs                    453400      0    453400   0% /storage</span><br><span class="line">tracefs                       0      0         0   0% /sys/kernel/debug/tracing</span><br><span class="line">adb                           0      0         0   0% /dev/usb-ffs/adb</span><br><span class="line">/data/media            12845524 381700  11996880   4% /storage/emulated</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>binder 信息</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/binder-xin-xi/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/binder-xin-xi/</url>
      
        <content type="html"><![CDATA[<p>大体信息:<br>/sys/kernel/debug/binder/transactions</p><p>每个进程的单个信息:<br>/sys/kernel/debug/binder/proc</p>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>apache2 下载服务器配置</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/apache2-xia-zai-fu-wu-qi-pei-zhi/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/apache2-xia-zai-fu-wu-qi-pei-zhi/</url>
      
        <content type="html"><![CDATA[<h1 id="apache2-下载服务器配置"><a href="#apache2-下载服务器配置" class="headerlink" title="apache2 下载服务器配置"></a>apache2 下载服务器配置</h1><ul><li>新建配置文件:</li></ul><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo vi /etc/apache2/sites-available/001-download.conf</span><br></pre></td></tr></table></figure><p>内容:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;VirtualHost *:3002&gt;</span><br><span class="line">        ServerName 127.0.0.1</span><br><span class="line">        ServerAdmin webmaster@localhost</span><br><span class="line">        #这两个配置必须一致</span><br><span class="line">        DocumentRoot /home/android/weibiao/downloadVersion/download</span><br><span class="line">        #这两个配置必须一致DocumentRoot 和 Directory</span><br><span class="line">        &lt;Directory /home/android/weibiao/downloadVersion/download&gt;</span><br><span class="line">          Options Indexes FollowSymLinks</span><br><span class="line">          AllowOverride none</span><br><span class="line">          Require all granted</span><br><span class="line">        &lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line">        ErrorLog $&#123;APACHE_LOG_DIR&#125;/error_download.log</span><br><span class="line">        CustomLog $&#123;APACHE_LOG_DIR&#125;/access_download.log combined</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;VirtualHost *:3002&gt;</span><br><span class="line">ServerName 127.0.0.1</span><br><span class="line">ServerAdmin webmaster@localhost</span><br><span class="line">        DocumentRoot /home/android/weibiao/downloadVersion/download</span><br><span class="line">        &lt;Directory /home/android/weibiao/downloadVersion/download&gt;</span><br><span class="line">          Options Indexes FollowSymLinks</span><br><span class="line">          AllowOverride none</span><br><span class="line">          Require all granted</span><br><span class="line">        &lt;/Directory&gt;</span><br><span class="line">ErrorLog $&#123;APACHE_LOG_DIR&#125;/error_download.log</span><br><span class="line">CustomLog $&#123;APACHE_LOG_DIR&#125;/access_download.log combined</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure><p>修改 /etc/apache2/ports.conf<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># If you just change the port or add more ports here, you will likely also</span><br><span class="line"># have to change the VirtualHost statement in</span><br><span class="line"># /etc/apache2/sites-enabled/000-default.conf</span><br><span class="line"></span><br><span class="line">Listen 80</span><br><span class="line">#新增的端口</span><br><span class="line">Listen 3002</span><br><span class="line">&lt;IfModule ssl_module&gt;</span><br><span class="line">Listen 443</span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line">&lt;IfModule mod_gnutls.c&gt;</span><br><span class="line">Listen 443</span><br><span class="line">&lt;/IfModule&gt;</span><br><span class="line"></span><br><span class="line"># vim: syntax=apache ts=4 sw=4 sts=4 sr noet</span><br></pre></td></tr></table></figure></p><ul><li><p>在/etc/apache2/sites-enabled目录下面创建软链接</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo ln -s  ../sites-available/001-download.conf  001-download.conf</span><br></pre></td></tr></table></figure></li><li><p>重启服务器:</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo service apache2 restart</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> 杂记 </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Android_Mat_工具使用</title>
      <link href="/2018/12/13/gong-zuo-xiao-tie-shi/android-mat-gong-ju-shi-yong/"/>
      <url>/2018/12/13/gong-zuo-xiao-tie-shi/android-mat-gong-ju-shi-yong/</url>
      
        <content type="html"><![CDATA[<h1 id="Android-Mat-工具使用"><a href="#Android-Mat-工具使用" class="headerlink" title="Android_Mat_工具使用"></a>Android_Mat_工具使用</h1><h2 id="抓取hprof"><a href="#抓取hprof" class="headerlink" title="抓取hprof"></a>抓取hprof</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">adb shell am dumpheap [pid] /data/local/tmp/[pid].hprof</span><br><span class="line">hprof-conv 3725.hprof 3725.mat.hprof</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">adb shell am dumpheap 9384 /data/local/tmp/9384_02.hprof</span><br></pre></td></tr></table></figure><h2 id="使用MAT"><a href="#使用MAT" class="headerlink" title="使用MAT"></a>使用MAT</h2><h2 id="这里需要修改-改为144就可以了"><a href="#这里需要修改-改为144就可以了" class="headerlink" title="这里需要修改,改为144就可以了."></a>这里需要修改,改为144就可以了.</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">private static final int DUMPSYS_ENTRY_COUNT_LIMIT = 14400; // 12 hours on 3 second poll</span><br></pre></td></tr></table></figure><h2 id="查找下面这段LOG"><a href="#查找下面这段LOG" class="headerlink" title="查找下面这段LOG"></a>查找下面这段LOG</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">fling expand=false aboveThreshold=false thresholdNeeded=false screenOnFromTouch=false</span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://stackoverflow.com/questions/25795458/is-it-possible-to-trigger-an-android-heap-dump-from-the-command-line" rel="external nofollow noopener noreferrer" target="_blank">https://stackoverflow.com/questions/25795458/is-it-possible-to-trigger-an-android-heap-dump-from-the-command-line</a></p><p><a href="https://stackoverflow.com/questions/6483714/live-memory-analysis-tool-for-android/6483906#6483906" rel="external nofollow noopener noreferrer" target="_blank">https://stackoverflow.com/questions/6483714/live-memory-analysis-tool-for-android/6483906#6483906</a></p><p><a href="https://developer.android.com/studio/profile/investigate-ram#hdanalyze" rel="external nofollow noopener noreferrer" target="_blank">https://developer.android.com/studio/profile/investigate-ram#hdanalyze</a></p>]]></content>
      
      
      <categories>
          
          <category> 工作小贴士 </category>
          
      </categories>
      
      
    </entry>
    
  
  
</search>
